# 爱奇艺、哔哩哔哩、腾讯视频解析器 (IQIYI-BILIBILI-TENCENT-parser)

	爱奇艺、哔哩哔哩、（腾讯视频）解析下载器。【支持导入会员Cookie下载会员视频】


## 关于核心更新
> 所谓的核心就是视频解析的算法代码，为了避免网站解析算法或者其他频繁变化导致需要的重新编译整个程序，所以将算法解析代码分离出来。核心文件将存放于目录下的core里面，可以通过解析器界面的菜单Help-Update Cores来对Github上的代码进行拉取更新。

## 关于该部分解析算法分析的过程
#### 可以参考文章：[http://zsaim.github.io/](http://zsaim.github.io/)

*****

## 核心更新
* **2019/05/12**
	* 更新腾讯视频的Cookie的登录验证。
	* 修复腾讯视频解析出现的N=0的情况。



## 程序更新
* **2019/05/13**
	* 更新下载模块。

* **2019/05/12**
	* 更新优化下载器。
	* 修复断点续传时block进度序号显示错误问题。

* **2019/05/07**
	* 修复部分腾讯视频无法解析下载问题。
	* 加入控制台日志查看（F2调出查看），方便调试。
	* 修复单视频文件合并出错问题。

* **2019/05/06**
	* 修复标题含有.生成的目录造成的无法下载问题。
	* 分离解析核心，方便更新。
	* 支持repo拉取更新核心，更新事件位于解析器的菜单[About - Update Core]。

* **2019/05/04**
	* 修复腾讯视频导入Cookie无效问题。
	* 添加下载器进行组下载，将M3U8碎片化以单文件下载。
	* （由于腾讯视频在没有导入Cookie的前提下会进行限速，所以建议导入Cookie后进行下载。）

* **2019/05/03**
	* 加入支持下载腾讯视频。		
	* （由于FFMPEG不支持SAMPLE-AES-CTR解密，所以该程序无法下载电影类加密的视频，只支持解析出M3U8，注意需要会员的视频是需要导入会员Cookie）。
	* 修复bilibili的flv格式合并错误问题。



## 使用说明

* 打开程序 main.exe，然后自己摸索。。。
* 目录下的"cookies/\*.txt"可以导入Cookie。（爱奇艺导入iqiyi.txt，哔哩哔哩导入bilibili.txt）

### Cookie所在域
| 网站(web site) | 域(domain) |
|--------|------|
|爱奇艺(IQIYI)| iqiyi.com|
|腾讯视频(TENCENT)| video.qq.com|
|哔哩哔哩(BILIBILI)| bilibili.com|



## 引用项目

* __``Nbdler``__: https://github.com/ZSAIm/Nbdler
* __``PyJSCaller``__: https://github.com/ZSAIm/PyJSCaller

***

## 项目地址
	github: https://github.com/ZSAIm/iqiyi-parser

## 历史更新

* **2019/04/28**
	* 支持断点续传下载。
	* 添加下载器的多种参数调节（可通过设置菜单进行修改）。
	* 更换gui部分布局。（设置选项移到了menubar的file菜单，下载选中项移到了listctrl的右键菜单）
	* 爱奇艺添加解析f4v资源。
	* 修复爱奇艺f4v多线程下载进度卡住问题。
	* 修复bilibili一部分视频无法解析问题。（至于大会员视频能不能下载还不清楚）
	* 使用ffmpeg来对视频进行合并的操作。
	* 加入merger框来显示ffmpeg合并进度和输出信息。

* **2019/04/25**
	* 重构项目。
	* 添加支持下载Bilibili视频。
	* 加入ffmpeg的支持。（目前仅用来视频和音频的合并）

* **2019/04/13**
	* 修复下载M3U8视频多线程数据重复错误问题（由于M3U8多线程下载字段不一致问题）。

* **2019/04/12**
	* 添加未完成任务提醒功能。
	* 添加设置配置文件（保存上次下载目录、同时最大下载任务等）。
	* 添加合并后提示是否删除分段文件。
	* 优化下载器线程管理。
	* 修复导入Cookie程序无法运行问题。
	* 修复关闭窗口提示“Failed to execute script main”错误。
	* 修复下载器若干bug。

* **2019/04/07**
	* 支持解析导出M3U8。
	* 支持导入会员Cookie来下载VIP视频。
	* 支持解析下载免费的1080P视频。
	* JS引擎从PyV8更换到Nodejs。
	* 更新解析器代码结构。

* **2019/03/29**
	* 修复愚蠢的选择目录无法合并问题。
	* 修复下载中关闭程序无法完全停止关闭程序问题。

* **2019/03/27**
	* 加入GUI支持。（花了两天粗劣写个一个GUI，等以后有时间再整理下）
	* 删除了一些设定。
	* 加入支持复制下载链接。  

* **2019/02/25**
	* 更新下载器程序。

* **2019/02/17**
	* 更新下载器程序，优化减少资源占用。
	* 支持更改下载路径。
	* 支持更改同时最大下载任务数。
	* 支持合并完后自动删除分段视频。

* **2018/09/07**
	* 修复若干bug。

	# 注意
	## 本程序仅供学习交流，请勿用于非法用途
